NIP-07
======

Web 浏览器的 `window.nostr` 功能
------------------------------------------

`草案` `可选`

`window.nostr` 对象可以由 Web 浏览器或扩展程序提供，网站或 Web 应用程序可以在检查其可用性后使用它。

该对象必须定义以下方法：

```
async window.nostr.getPublicKey(): string // 返回十六进制格式的公钥
async window.nostr.signEvent(event: { created_at: number, kind: number, tags: string[][], content: string }): Event // 接受事件对象，添加 `id`、`pubkey` 和 `sig` 并返回
```

除了上述两个基本方法外，还可以可选地实现以下功能：
```
async window.nostr.nip04.encrypt(pubkey, plaintext): string // 返回按 nip-04 规定的密文和 iv（已弃用）
async window.nostr.nip04.decrypt(pubkey, ciphertext): string // 接受按 nip-04 规定的密文和 iv（已弃用）
async window.nostr.nip44.encrypt(pubkey, plaintext): string // 返回按 nip-44 规定的密文
async window.nostr.nip44.decrypt(pubkey, ciphertext): string // 接受按 nip-44 规定的密文
```

### 对扩展程序作者的建议
为了确保 `window.nostr` 在页面加载时对 nostr 客户端可用，创建 Chromium 和 Firefox 扩展程序的作者应该通过在扩展程序的清单中指定 `"run_at": "document_end"` 来加载他们的脚本。


### 实现

参见 https://github.com/aljazceru/awesome-nostr#nip-07-browser-extensions。
