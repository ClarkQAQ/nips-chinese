NIP-38
======

用户状态
-------------

`草案` `可选`

## 摘要

本 NIP 为用户提供了一种分享实时状态的方式，例如他们正在听什么音乐，以及他们目前在做什么：工作、游戏、离开办公室等。

## 实时状态

一个种类为 `30315` "用户状态"的特殊事件被定义为*可选过期*的_可寻址事件_，其中 `d` 标签表示状态类型：

例如：

```json
{
  "kind": 30315,
  "content": "注册 nostrasia！",
  "tags": [
    ["d", "general"],
    ["r", "https://nostr.world"]
  ],
}
```

```json
{
  "kind": 30315,
  "content": "Intergalatic - Beastie Boys",
  "tags": [
    ["d", "music"],
    ["r", "spotify:search:Intergalatic%20-%20Beastie%20Boys"],
    ["expiration", "1692845589"]
  ],
}
```

定义了两种常见的状态类型：`general` 和 `music`。`general` 表示一般状态："工作中"、"徒步旅行"等。

`music` 状态事件用于实时流式传输您当前正在收听的内容。`music` 状态的过期时间应该是曲目停止播放的时间。

可以使用任何其他状态类型，但它们不由此 NIP 定义。

状态可以包含链接到 URL、档案、笔记或可寻址事件的 `r`、`p`、`e` 或 `a` 标签。

`content` 可以包含表情符号或 [NIP-30](30.md) 自定义表情符号。如果 `content` 是空字符串，则客户端应该清除状态。

## 客户端行为

客户端可以在帖子或档案上的用户名旁边显示此信息，以提供实时用户状态信息。

## 用例

* 日历 nostr 应用程序，当您在会议中时更新您的一般状态
* Nostr Nests，当您加入时用指向巢穴的链接更新您的一般状态
* Nostr 音乐流媒体服务，当您在听时更新您的音乐状态
* 播客应用程序，当您在听播客时更新您的音乐状态，并提供链接供其他人也收听
* 客户端可以使用系统媒体播放器来更新正在播放的音乐状态
