NIP-99
======

分类广告
-------------------

`草案` `可选`

此 NIP 定义了 `kind:30402`：一个可寻址事件，用于描述列出任何任意产品、服务或其他待售或提供物品的分类广告，并包含足够的结构化元数据以使其有用。

该规范支持广泛的用例：实体商品、服务、工作机会、租赁、免费赠品、个人广告等。为了促进实施 NIP-99 用于电子商务的客户端之间的互操作性，您可以在[这里](https://github.com/GammaMarkets/market-spec/blob/main/spec.md)找到扩展提案，该提案标准化了电子商务用例，同时保持规范的轻量级和灵活性。虽然 [NIP-15](15.md) 提供了严格结构化的市场规范，但 NIP-99 已成为一个更简单、更灵活的替代方案。

这些事件的结构与 [NIP-23](23.md) 长格式内容事件非常相似。

### 草稿 / 非活跃广告

`kind:30403` 与 `kind:30402` 具有相同的结构，用于保存草稿或非活跃的分类广告。

### 内容

`.content` 字段应该是对所提供内容和提供者的描述。这些事件应该是 Markdown 语法的字符串。

### 作者

这些事件的 `.pubkey` 字段被视为创建广告的一方。

### 元数据

- 对于"标签"/"主题标签"（即与广告相关的分类或关键词），应该使用 `"t"` 事件标签。
- 对于图片，无论是否包含在 markdown 内容中，客户端应该使用 [NIP-58](58.md) 中描述的 `image` 标签。这允许客户端更容易地以轮播格式显示图片。

以下用于结构化元数据的标签已标准化，应该包含。可以根据需要添加其他标签。

- `"title"`，广告的标题
- `"summary"`，广告的简短标语或摘要
- `"published_at"`，首次发布广告的时间戳（以 unix 秒为单位 – 转换为字符串）。
- `"location"`，位置。
- `"price"`，所列物品的价格。这是格式为 `[ "price", "<number>", "<currency>", "<frequency>" ]` 的数组。
  - `"price"` 是标签名称
  - `"<number>"` 是数字格式的金额（但作为字符串包含在标签中）
  - `"<currency>"` 是 3 字符 ISO 4217 格式或类似 ISO 4217 的货币代码的货币单位（例如 `"btc"`、`"eth"`）。
  - `"<frequency>"` 是可选的，可用于描述定期付款。应该是名词格式（hour、day、week、month、year 等）
- `"status"`（可选），广告的状态。应该是"active"或"sold"。

#### `price` 示例

- $50 一次性付款 `["price", "50", "USD"]`
- €15 每月 `["price", "15", "EUR", "month"]`
- £50,000 每年 `["price", "50000", "GBP", "year"]`

其他可能有用的常见标签。

- `"g"`，用于更精确位置的地理哈希

## 示例事件

```jsonc
{
  "kind": 30402,
  "created_at": 1675642635,
  // Markdown 内容
  "content": "Lorem [ipsum][nostr:nevent1qqst8cujky046negxgwwm5ynqwn53t8aqjr6afd8g59nfqwxpdhylpcpzamhxue69uhhyetvv9ujuetcv9khqmr99e3k7mg8arnc9] dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n在 nostr:naddr1qqzkjurnw4ksz9thwden5te0wfjkccte9ehx7um5wghx7un8qgs2d90kkcq3nk2jry62dyf50k0h36rhpdtd594my40w9pkal876jxgrqsqqqa28pccpzu 阅读更多。",
  "tags": [
    ["d", "lorem-ipsum"],
    ["title", "Lorem Ipsum"],
    ["published_at", "1296962229"],
    ["t", "electronics"],
    ["image", "https://url.to.img", "256x256"],
    ["summary", "比标题多一点的更多 lorem ipsum"],
    ["location", "NYC"],
    ["price", "100", "USD"],
    [
      "e",
      "b3e392b11f5d4f28321cedd09303a748acfd0487aea5a7450b3481c60b6e4f87",
      "wss://relay.example.com"
    ],
    [
      "a",
      "30023:a695f6b60119d9521934a691347d9f78e8770b56da16bb255ee286ddf9fda919:ipsum",
      "wss://relay.nostr.org"
    ]
  ],
  "pubkey": "...",
  "id": "..."
}
```
