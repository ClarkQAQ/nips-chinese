NIP-37
======

草稿事件
------------

`草案` `可选`

本 NIP 将种类 `31234` 定义为任何其他事件种类草稿的私有包装。

草稿事件被 JSON 字符串化，[NIP44 加密](44_ZH.md)到签名者的公钥并放置在事件的 `.content` 内。

额外的 `k` 标签标识草稿事件的种类。

```js
{
  "kind": 31234,
  "tags": [
    ["d", "<标识符>"],
    ["k", "<草稿事件的种类>"],
    ["e", "<锚点事件事件ID>", "<中继器URL>"],
    ["a", "<锚点事件地址>", "<中继器URL>"],
  ],
  "content": nip44Encrypt(JSON.stringify(draft_event)),
  // 其他字段
}
```

空白的 `.content` 意味着此草稿已被客户端删除，但中继器仍然有该事件。

标签 `e` 和 `a` 标识一个或多个锚点事件，例如回复中的父事件。

## 私有内容的中继器列表

种类 `10013` 表示用户存储草稿等私有事件的首选中继器。事件必须在私有标签中包含 `relay` URL 列表。私有标签是 JSON 字符串化的，NIP-44 加密到签名者的密钥并放置在事件的 .content 内。

```js
{
  "kind": 10013,
  "tags": [],
  "content": nip44Encrypt(JSON.stringify([
    ["relay", "wss://myrelay.mydomain.com"]
  ]))
  //...其他字段
}
```

此事件中列出的中继器应该经过身份验证，并且只允许下载由经过身份验证的用户签名的事件。

客户端应该将种类 `10013` 事件发布到作者的 [NIP-65](65_ZH.md) `write` 中继器。
