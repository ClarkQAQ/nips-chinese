NIP-25
======

反应
---------

`草案` `可选`

反应是一个 `kind 7` 事件，用于表示用户对其他事件的反应。反应的 `content` 字段必须包含表示反应值的用户生成内容（通常是 `+`、`-` 或表情符号）。

`content` 设置为 `+` 或空字符串的反应必须被解释为"喜欢"或"赞成"。
`content` 设置为 `-` 的反应必须被解释为"不喜欢"或"反对"。

`content` 设置为表情符号或 [NIP-30](30_ZH.md) 自定义表情符号的反应不应被解释为"喜欢"或"不喜欢"。客户端可以在帖子上显示此表情符号反应。

标签
----

必须始终有一个设置为被反应事件 `id` 的 `e` 标签。`e` 标签应该包含指向可以找到被反应事件的中继器的中继器提示。如果客户端决定包含其他 `e` 标签（不推荐），目标事件 `id` 应该是 `e` 标签中的最后一个。

应该有一个设置为被反应事件 `pubkey` 的 `p` 标签。如果客户端决定包含其他 `p` 标签（不推荐），目标事件 `pubkey` 应该是 `p` 标签中的最后一个。

如果被反应的事件是可寻址事件，应该与 `e` 标签一起包含 `a` 标签，它必须设置为被反应事件的坐标（`kind:pubkey:d-tag`）。

`e` 和 `a` 标签应该包含中继器和公钥提示。`p` 标签应该包含中继器提示。

反应事件可以包含一个 `k` 标签，其值为被反应事件的字符串化种类编号。

**示例代码**

```swift
func make_like_event(pubkey: String, privkey: String, liked: NostrEvent, hint: String) -> NostrEvent {
    var tags: [[String]] = []
    tags.append(["e", liked.id, hint, liked.pubkey])
    tags.append(["p", liked.pubkey, hint])
    tags.append(["k", String(liked.kind)])
    let ev = NostrEvent(content: "+", pubkey: pubkey, kind: 7, tags: tags)
    ev.calculate_id()
    ev.sign(privkey: privkey)
    return ev
}
```

外部内容反应
---------------------

如果反应的目标不是原生 nostr 事件，反应必须是 `kind 17` 事件，并且必须包含 [NIP-73](73_ZH.md) 外部内容 `k` + `i` 标签来正确引用内容。

_对网站的反应：_
```jsonc
{
  "kind": 17,
  "content": "⭐",
  "tags": [
    ["k", "web"],
    ["i", "https://example.com"]
  ],
}
```

_对播客集的反应：_
```jsonc
{
  "kind": 17,
  "content": "+",
  "tags": [
    ["k", "podcast:guid"],
    ["i", "podcast:guid:917393e3-1b1e-5cef-ace4-edaa54e1f810", "https://fountain.fm/show/QRT0l2EfrKXNGDlRrmjL"],
    ["k", "podcast:item:guid"],
    ["i", "podcast:item:guid:PC20-229", "https://fountain.fm/episode/DQqBg5sD3qFGMCZoSuLF"]
  ],
}
```




自定义表情符号反应
---------------------

客户端可以在反应内容中指定自定义表情符号（[NIP-30](30_ZH.md)）`:shortcode:`。如果指定了短代码，客户端应该引用表情符号标签并将内容渲染为表情符号。

```jsonc
{
  "kind": 7,
  "content": ":soapbox:",
  "tags": [
    ["emoji", "soapbox", "https://gleasonator.com/emoji/Gleasonator/soapbox.png"]
  ],
  // 其他字段...
}
```

内容只能设置一个 `:shortcode:`。表情符号标签应该是一个。
