NIP-C0
======

代码片段
-------------

`草案` `可选`

## 摘要

此 NIP 定义了一种用于分享和存储代码片段的新事件类型。与常规文本笔记（`kind:1`）不同，代码片段具有专门的元数据，如语言、扩展名和其他特定于代码的属性，这些属性增强了可发现性、语法高亮和改善的用户体验。

## 事件类型

此 NIP 将 `kind:1337` 定义为代码片段事件。

`.content` 字段包含实际的代码片段文本。

## 可选标签

- `l` - 编程语言名称（小写）。示例："javascript"、"python"、"rust"
- `name` - 代码片段的名称，通常是文件名。示例："hello-world.js"、"quick-sort.py"
- `extension` - 文件扩展名（不带点）。示例："js"、"py"、"rs"
- `description` - 代码功能的简要描述
- `runtime` - 运行时或环境规范（例如，"node v18.15.0"、"python 3.11"）
- `license` - 代码共享的许可证（例如，"MIT"、"GPL-3.0"、"Apache-2.0"）
- `dep` - 代码运行所需的依赖项（可以重复）
- `repo` - 对此代码来源的存储库的引用

## 格式

```json
{
  "id": "<序列化事件数据的32字节小写十六进制编码SHA-256>",
  "pubkey": "<事件创建者的32字节小写十六进制编码公钥>",
  "created_at": <Unix时间戳秒>,
  "kind": 1337,
  "content": "function helloWorld() {\n  console.log('Hello, Nostr!');\n}\n\nhelloWorld();",
  "tags": [
    ["l", "javascript"],
    ["extension", "js"],
    ["name", "hello-world.js"],
    ["description", "一个基本的JavaScript函数，向控制台打印'Hello, Nostr!'"],
    ["runtime", "node v18.15.0"],
    ["license", "MIT"],
    ["repo", "https://github.com/nostr-protocol/nostr"]
  ],
  "sig": "<id的64字节签名>"
}
```

## 客户端行为

支持此 NIP 的客户端应该：

1. 基于语言使用适当的语法高亮显示代码片段。
2. 允许通过单个操作复制完整的代码片段。
3. 使用适当的格式渲染代码，保留空白和缩进。
4. 突出显示语言和扩展名。
5. 在可能的情况下为支持的语言提供"运行"功能。
6. 将描述（如果可用）作为片段展示的一部分显示。

客户端可以提供其他功能，如：

1. 代码编辑功能
2. 分叉/修改片段
3. 基于运行时/依赖项创建可执行环境
4. 使用提供的扩展名将片段下载为文件
5. 带归属的分享片段
