NIP-32
======

标记
--------

`草案` `可选`

本 NIP 定义了两个新的可索引标签来标记事件，以及一个新的事件种类（`kind:1985`）来将这些标签附加到现有事件上。这支持多个用例，包括分布式审核、收藏管理、许可证分配和内容分类。

新标签：

- `L` 表示标签命名空间
- `l` 表示标签

标签命名空间标签
----

`L` 标签可以是任何字符串，但发布者应该通过使用定义明确的命名空间（如 ISO 标准）或反向域名记法来确保它们是明确的。

建议使用 `L` 标签以支持按命名空间而不是按特定标签搜索。当标签内容由最终用户提供时，可以使用特殊的 `ugc`（"用户生成内容"）命名空间。

以 `#` 开头的 `L` 标签表示标签目标应该与标签的值相关联。这是将标准 nostr 标签附加到事件、公钥、中继器、URL 等的方法。

标签标签
----

`l` 标签的值可以是任何字符串。如果使用 `L` 标签，`l` 标签必须包含与同一事件中 `L` 标签值匹配的标记。如果不包含 `L` 标签，仍然应该包含标记。如果都不包含，则暗示为 `ugc`。

标签目标
----

标签事件必须包含一个或多个表示被标记对象的标签：`e`、`p`、`a`、`r` 或 `t` 标签。这允许分别标记事件、人员、中继器或主题。与 NIP-01 一样，在使用 `e` 和 `p` 标签时应该包含中继器提示。

内容
-------

标签应该是简短、有意义的字符串。更长的讨论，例如解释为什么某些东西被这样标记，应该放在事件的 `content` 字段中。

自我报告
-------

`l` 和 `L` 标签可以添加到其他事件种类以支持自我报告。对于种类不是 1985 的事件，标签指的是事件本身。

示例事件
--------------

建议将多个公钥与 `permies` 主题关联。

```jsonc
{
  "kind": 1985,
  "tags": [
    ["L", "#t"],
    ["l", "permies", "#t"],
    ["p", <pubkey1>, <relay_url>],
    ["p", <pubkey2>, <relay_url>]
  ],
  // 其他字段...
}
```

一个报告，标记对人类暴力行为，如 ontology.example.com 定义。

```jsonc
{
  "kind": 1985,
  "tags": [
    ["L", "com.example.ontology"],
    ["l", "VI-hum", "com.example.ontology"],
    ["p", <pubkey1>, <relay_url>],
    ["p", <pubkey2>, <relay_url>]
  ],
  // 其他字段...
}
```

聊天事件的审核建议。

```jsonc
{
  "kind": 1985,
  "tags": [
    ["L", "nip28.moderation"],
    ["l", "approve", "nip28.moderation"],
    ["e", <kind40_event_id>, <relay_url>]
  ],
  // 其他字段...
}
```

向事件分配许可证。

```jsonc
{
  "kind": 1985,
  "tags": [
    ["L", "license"],
    ["l", "MIT", "license"],
    ["e", <event_id>, <relay_url>]
  ],
  // 其他字段...
}
```

发布者可以通过向自己的非 1985 事件添加 `l` 标签来进行自我标记。在这种情况下，种类 1 事件的作者使用 ISO 3166-2 将他们的笔记标记为与意大利米兰相关。

```jsonc
{
  "kind": 1,
  "tags": [
    ["L", "ISO-3166-2"],
    ["l", "IT-MI", "ISO-3166-2"]
  ],
  "content": "米兰这里很美！",
  // 其他字段...
}
```

作者使用 ISO-639-1 将他们的笔记语言标记为英语。

```jsonc
{
  "kind": 1,
  "tags": [
    ["L", "ISO-639-1"],
    ["l", "en", "ISO-639-1"]
  ],
  "content": "English text",
  // 其他字段...
}
```

其他注意事项
-----------

当使用此 NIP 一次批量标记多个目标时，可以使用 [NIP-09](09.md) 请求删除事件，并可以发布替换。我们选择不为此使用可寻址/可替换事件，因为制定标准 `d` 标签的复杂性。为了在查询时避免歧义，发布者应该将标记事件限制为单个命名空间。

在创建词汇表之前，探索您的用例可能已经如何设计，并在可能的情况下模仿该设计。鼓励使用反向域名记法以避免命名空间冲突，但为了互操作性，所有命名空间都应该被视为开放供公众使用，而不是专有的。换句话说，如果有一个适合您用例的命名空间，即使它指向其他人的域名，也要使用它。

词汇表可以选择完全限定命名空间内的所有标签（例如，`["l", "com.example.vocabulary:my-label"]`）。在定义更正式的词汇表时，这可能是首选的，这些词汇表在不使用 `L` 标签查询时不应与另一个命名空间混淆。对于这些词汇表，所有标签都应该包含命名空间（而不是混合限定和非限定标签）。

判断用例是否适合此 NIP 的一个好启发是标签是否会是唯一的。例如，许多事件可能被标记为特定地点、主题或公钥，但具有特定值如"John Doe"或"3.18743"的标签不是标签，它们是值，应该以其他方式处理。


附录：已知本体
--------------------------

下面是目前广泛使用的本体的非详尽列表。

- [社会本体类别](https://github.com/CLARIAH/awesome-humanities-ontologies)
