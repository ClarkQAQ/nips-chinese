NIP-10
======

文本笔记和主题
----------------------

`草案` `可选`

本 NIP 将 `kind:1` 定义为简单的纯文本笔记。

## 摘要

`.content` 属性包含一些人类可读的文本。

`e` 标签可用于定义笔记主题根和回复。它们应该按从根到直接父级的回复堆栈排序。

当在 `.content` 中引用事件时，可以使用 `q` 标签与 [NIP-21](21_ZH.md)。

```json
["q", "<事件ID> 或 <事件地址>", "<中继器URL>", "<如果是常规事件的公钥>"]
```

`e` 和 `q` 标签的作者应该作为 `p` 标签添加，以通知新的回复或引用。

不应该使用标记语言，如 markdown 和 HTML。

## 标记的"e"标签（首选）

带有 `e` 标签的种类 1 事件是对其他种类 1 事件的回复。种类 1 回复不得用于回复其他种类，请使用 [NIP-22](22_ZH.md)。

`["e", <事件ID>, <中继器URL>, <标记>, <公钥>]`

其中：

* `<事件ID>` 是被引用事件的 ID。
* `<中继器URL>` 是与引用相关联的推荐中继器的 URL。客户端应该添加有效的 `<中继器URL>` 字段，但也可以将其留空为 `""`。
* `<标记>` 是可选的，如果存在，则是 `"reply"`、`"root"` 之一。
* `<公钥>` 是可选的，应该是被引用事件作者的公钥

标记为 `"reply"` 的表示正在回应的回复事件的 ID。标记为 `"root"` 的表示正在回应的回复主题的根 ID。对于顶级回复（直接回复根事件的回复），应该只使用 `"root"` 标记。

对主题根的直接回复应该有一个类型为"root"的标记"e"标签。

>这个方案是首选的，因为它允许事件提及其他事件而不会与 `<回复ID>` 或 `<根ID>` 混淆。

`<公钥>` 应该是 `e` 标记事件作者的公钥，这在发件箱模型中用于从作者写入中继器搜索该事件，其中中继器提示无法解析事件。

## "p"标签
在文本事件中使用，包含用于记录谁参与回复主题的公钥列表。

当回复文本事件 E 时，回复事件的"p"标签应该包含 E 的所有"p"标签以及被回复事件的 `"pubkey"`。

示例：给定由 `a1` 创作的文本事件，带有"p"标签 [`p1`, `p2`, `p3`]，则回复的"p"标签应该是 [`a1`, `p1`, `p2`, `p3`]，顺序不限。

## 已弃用的位置"e"标签

这个方案不再常用，这里只是为了保持与网络上较旧事件的向后兼容性。

位置 `e` 标签已被弃用，因为当事件引用另一个事件但不是回复时，它们会产生难以或无法解决的歧义。

它们使用没有任何标记的简单 `e` 标签。

`["e", <事件ID>, <中继器URL>]` 如 NIP-01 中所述。

其中：

* `<事件ID>` 是被引用事件的 ID。
* `<中继器URL>` 是与引用相关联的推荐中继器的 URL。许多客户端将此字段视为可选。

**事件中"e"标签的位置表示特定含义如下**：

* 没有"e"标签：<br>
此事件不是对任何其他事件的回复，也不引用任何其他事件。

* 一个"e"标签：<br>
`["e", <id>]`：此事件回复的事件的 ID。

* 两个"e"标签：`["e", <根ID>]`，`["e", <回复ID>]` <br>
`<根ID>` 是回复链根部事件的 ID。`<回复ID>` 是此事件回复的文章的 ID。

* 多个"e"标签：`["e", <根ID>]` `["e", <提及ID>]`，...，`["e", <回复ID>]`<br>
可能有任意数量的 `<提及ID>`。这些是可能在回复链中也可能不在回复链中的事件的 ID。
它们来自此事件的引用。`根ID` 和 `回复ID` 如上所述。
