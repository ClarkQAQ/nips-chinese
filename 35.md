NIP-35
======

种子文件
--------

`草案` `可选`

本 NIP 定义了一个新的 `kind 2003`，它是一个种子文件。

`kind 2003` 是一个简单的种子文件索引，其中有足够的信息来搜索内容和构建磁力链接。nostr 上不存在种子文件。

## 标签
- `x`：V1 BitTorrent 信息哈希，如[磁力链接](https://www.bittorrent.org/beps/bep_0053.html)中所见 `magnet:?xt=urn:btih:HASH`
- `file`：种子文件内的文件条目，包括完整路径，即 `info/example.txt`
- `tracker`：（可选）用于此种子文件的跟踪器

为了使种子文件可以按一般类别搜索，您应该包含一些标签，如 `movie`、`tv`、`HD`、`UHD` 等。

## 标签前缀

标签前缀用于用引用标记内容，即 `["i", "imdb:1234"]`

- `tcat`：逗号分隔的文本类别路径，即 `["i", "tcat:video,movie,4k"]`，这也应该以最佳努力方式匹配 `newznab` 类别。
- `newznab`：来自 [newznab](https://github.com/Prowlarr/Prowlarr/blob/develop/src/NzbDrone.Core/Indexers/NewznabStandardCategory.cs) 的类别 ID
- `tmdb`：[电影数据库](https://www.themoviedb.org/) ID。
- `ttvdb`：[TV 数据库](https://thetvdb.com/) ID。
- `imdb`：[IMDB](https://www.imdb.com/) ID。
- `mal`：[MyAnimeList](https://myanimelist.net/) ID。
- `anilist`：[AniList](https://anilist.co/) ID。

在数据库支持多种媒体类型的情况下，应该包含第二级前缀。
- `tmdb:movie:693134` 映射到 `themoviedb.org/movie/693134`
- `ttvdb:movie:290272` 映射到 `thetvdb.com/movies/dune-part-two`
- `mal:anime:9253` 映射到 `myanimelist.net/anime/9253`
- `mal:manga:17517` 映射到 `myanimelist.net/manga/17517`

在某些情况下，URL 映射不是直接的，一般来说映射 URL 超出了此 NIP 的范围，上面的部分只是一个指南，以便实现者有足够的信息在他们希望时成功映射 URL。

```json
{
  "kind": 2003,
  "content": "<长描述预格式化>",
  "tags": [
    ["title", "<种子文件标题>"],
    ["x", "<bittorrent信息哈希>"],
    ["file", "<文件名>", "<文件大小字节>"],
    ["file", "<文件名>", "<文件大小字节>"],
    ["tracker", "udp://mytacker.com:1337"],
    ["tracker", "http://1337-tracker.net/announce"],
    ["i", "tcat:video,movie,4k"],
    ["i", "newznab:2045"],
    ["i", "imdb:tt15239678"],
    ["i", "tmdb:movie:693134"],
    ["i", "ttvdb:movie:290272"],
    ["t", "movie"],
    ["t", "4k"],
  ]
}
```

## 种子文件评论

种子文件评论是 `kind 2004` 事件，用于回复种子文件事件。

此事件的工作方式与 `kind 1` 完全相同，应该遵循 `NIP-10` 进行标记。

## 实现
1. [dtan.xyz](https://git.v0l.io/Kieran/dtan)
2. [nostrudel.ninja](https://github.com/hzrd149/nostrudel/tree/next/src/views/torrents)
