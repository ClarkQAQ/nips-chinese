NIP-68
======

图片优先信息流
-------------------

`草案` `可选`

本 NIP 为图片优先客户端定义了事件种类 `20`。图片必须是自包含的。它们在外部托管并使用 `imeta` 标签引用。

这种类型的事件的想法是迎合类似 Instagram、Flickr、Snapchat 或 9GAG 等平台的 Nostr 客户端，其中图片本身在用户体验中占据中心舞台。

## 图片事件

图片事件包含 `title` 标签和 `.content` 中的描述。

它们可能包含多个图像作为单个帖子显示。

```jsonc
{
  "id": <序列化事件数据的 32 字节小写十六进制编码 SHA-256>,
  "pubkey": <事件创建者的 32 字节小写十六进制编码公钥>,
  "created_at": <以秒为单位的 Unix 时间戳>,
  "kind": 20,
  "content": "<帖子描述>",
  "tags": [
    ["title", "<帖子简短标题>"],

    // 图片数据
    [
      "imeta",
      "url https://nostr.build/i/my-image.jpg",
      "m image/jpeg",
      "blurhash eVF$^OI:${M{o#*0-nNFxakD-?xVM}WEWB%iNKxvR-oetmo#R-aen$",
      "dim 3024x4032",
      "alt 俯瞰哥斯达黎加海岸的风景照片",
      "x <如 NIP 94 中指定的 sha256 哈希>",
      "fallback https://nostrcheck.me/alt1.jpg",
      "fallback https://void.cat/alt1.jpg"
    ],
    [
      "imeta",
      "url https://nostr.build/i/my-image2.jpg",
      "m image/jpeg",
      "blurhash eVF$^OI:${M{o#*0-nNFxakD-?xVM}WEWB%iNKxvR-oetmo#R-aen$",
      "dim 3024x4032",
      "alt 另一张俯瞰哥斯达黎加海岸的风景照片",
      "x <如 NIP 94 中指定的 sha256 哈希>",
      "fallback https://nostrcheck.me/alt2.jpg",
      "fallback https://void.cat/alt2.jpg",

      "annotate-user <公钥的 32 字节十六进制>:<posX>:<posY>" // 在图片的特定位置标记用户
    ],

    ["content-warning", "<原因>"], // 如果是 NSFW

    // 被标记的用户
    ["p", "<公钥的 32 字节十六进制>", "<可选推荐中继器 URL>"],
    ["p", "<公钥的 32 字节十六进制>", "<可选推荐中继器 URL>"],

    // 指定媒体类型以供过滤器允许客户端按支持的种类过滤
    ["m", "image/jpeg"],

    // 每个图像的哈希以使其可查询
    ["x", "<sha256>"]

    // 标签
    ["t", "<标签>"],
    ["t", "<标签>"],

    // 位置
    ["location", "<位置>"], // 城市名称、州、国家
    ["g", "<地理哈希>"],

    // 当图像中写有文本时，添加标签表示语言
    ["L", "ISO-639-1"],
    ["l", "en", "ISO-639-1"]
  ]
}
```

`imeta` 标签 `annotate-user` 在图像的特定位置放置用户链接。

只接受以下媒体类型：
- `image/apng`：动画可移植网络图形 (APNG)
- `image/avif`：AV1 图像文件格式 (AVIF)
- `image/gif`：图形交换格式 (GIF)
- `image/jpeg`：联合摄影专家组图像 (JPEG)
- `image/png`：可移植网络图形 (PNG)
- `image/webp`：Web 图片格式 (WEBP)

图片事件可能与 [NIP-71](71.md) 的种类 `22` 一起使用，在同一信息流中显示短垂直视频。
